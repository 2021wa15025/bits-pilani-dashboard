<!DOCTYPE html>
<html>
<head>
    <title>Manual Cross-Session Test</title>
</head>
<body>
    <h1>Cross-Session Messaging Debug</h1>
    <button onclick="setupTestData()">Setup Test Data</button>
    <button onclick="clearData()">Clear Data</button>
    <button onclick="showData()">Show Data</button>
    <div id="output"></div>

    <script>
        function setupTestData() {
            // Clear existing data
            localStorage.removeItem('cross_session_messages');
            localStorage.removeItem('cross_session_chats');

            // Create messages between Hari and Priya
            const messages = {
                'student-hari_student-priya': [
                    {
                        id: 'msg1',
                        fromUserId: 'student-hari',
                        toUserId: 'student-priya',
                        content: 'Hi Priya! How are your studies going?',
                        type: 'text',
                        timestamp: new Date().toISOString(),
                        fromUserName: 'HARI HARA SUDHAN',
                        senderName: 'HARI HARA SUDHAN',
                        senderAvatar: ''
                    },
                    {
                        id: 'msg2',
                        fromUserId: 'student-priya',
                        toUserId: 'student-hari',
                        content: 'Hi Hari! They are going well. How about yours?',
                        type: 'text',
                        timestamp: new Date().toISOString(),
                        fromUserName: 'Priya Patel',
                        senderName: 'Priya Patel',
                        senderAvatar: ''
                    }
                ]
            };

            // Create chats
            const chats = {
                'student-hari': {
                    'student-priya': {
                        id: 'student-priya',
                        participantId: 'student-priya',
                        participantName: 'Priya Patel',
                        participantEmail: 'priya.patel@example.com',
                        participantAvatar: '',
                        lastMessage: messages['student-hari_student-priya'][1],
                        lastMessageTime: new Date().toISOString(),
                        unreadCount: 0
                    }
                },
                'student-priya': {
                    'student-hari': {
                        id: 'student-hari',
                        participantId: 'student-hari',
                        participantName: 'HARI HARA SUDHAN',
                        participantEmail: 'hari.sudhan@example.com',
                        participantAvatar: '',
                        lastMessage: messages['student-hari_student-priya'][1],
                        lastMessageTime: new Date().toISOString(),
                        unreadCount: 1
                    }
                }
            };

            localStorage.setItem('cross_session_messages', JSON.stringify(messages));
            localStorage.setItem('cross_session_chats', JSON.stringify(chats));

            document.getElementById('output').innerHTML = '<p style="color: green;">‚úÖ Test data created! Now test in the main app.</p>';
        }

        function clearData() {
            localStorage.removeItem('cross_session_messages');
            localStorage.removeItem('cross_session_chats');
            document.getElementById('output').innerHTML = '<p style="color: orange;">üóëÔ∏è Data cleared!</p>';
        }

        function showData() {
            const messages = localStorage.getItem('cross_session_messages');
            const chats = localStorage.getItem('cross_session_chats');
            
            document.getElementById('output').innerHTML = `
                <h3>Cross-Session Messages:</h3>
                <pre>${messages || 'None'}</pre>
                <h3>Cross-Session Chats:</h3>
                <pre>${chats || 'None'}</pre>
            `;
        }
    </script>
</body>
</html>