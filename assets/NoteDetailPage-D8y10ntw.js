const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/jspdf.es.min-B-M1bMYu.js","assets/index-ByxbEv33.js","assets/index-DQLFiXFH.css"])))=>i.map(i=>d[i]);
import{l as X,r as a,ab as Y,ac as De,j as e,ad as Te,ae as V,af as Q,ag as $,ah as W,ai as ke,aj as Le,c as me,B as S,a2 as ze,ak as _e,h as ce,aa as ie,C as I,i as O,a as M,E as Fe,M as G,N as Ie,a1 as z,al as Me,am as We,D as $e,d as He,e as Oe,f as Be,an as Ye,g as Ue,Q as Xe,R as Ve,$ as qe,a0 as Ge,ao as Ze,K as de}from"./index-ByxbEv33.js";import{T as Ke,F as ue}from"./tag-CzoLy18g.js";/**
 * @license lucide-react v0.336.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=X("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-react v0.336.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=X("Maximize2",[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]);/**
 * @license lucide-react v0.336.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const et=X("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.336.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tt=X("ZoomIn",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"11",x2:"11",y1:"8",y2:"14",key:"1vmskp"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);/**
 * @license lucide-react v0.336.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rt=X("ZoomOut",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["line",{x1:"21",x2:"16.65",y1:"21",y2:"16.65",key:"13gj7c"}],["line",{x1:"8",x2:"14",y1:"11",y2:"11",key:"durymu"}]]);function st(t,r){return a.useReducer((n,o)=>r[n][o]??n,t)}var re="ScrollArea",[xe]=Te(re),[nt,P]=xe(re),fe=a.forwardRef((t,r)=>{const{__scopeScrollArea:n,type:o="hover",dir:s,scrollHideDelay:l=600,...i}=t,[d,u]=a.useState(null),[m,h]=a.useState(null),[p,x]=a.useState(null),[g,j]=a.useState(null),[_,b]=a.useState(null),[R,D]=a.useState(0),[H,y]=a.useState(0),[E,N]=a.useState(!1),[F,T]=a.useState(!1),w=Y(r,k=>u(k)),C=De(s);return e.jsx(nt,{scope:n,type:o,dir:C,scrollHideDelay:l,scrollArea:d,viewport:m,onViewportChange:h,content:p,onContentChange:x,scrollbarX:g,onScrollbarXChange:j,scrollbarXEnabled:E,onScrollbarXEnabledChange:N,scrollbarY:_,onScrollbarYChange:b,scrollbarYEnabled:F,onScrollbarYEnabledChange:T,onCornerWidthChange:D,onCornerHeightChange:y,children:e.jsx(V.div,{dir:C,...i,ref:w,style:{position:"relative","--radix-scroll-area-corner-width":R+"px","--radix-scroll-area-corner-height":H+"px",...t.style}})})});fe.displayName=re;var pe="ScrollAreaViewport",ge=a.forwardRef((t,r)=>{const{__scopeScrollArea:n,children:o,nonce:s,...l}=t,i=P(pe,n),d=a.useRef(null),u=Y(r,d,i.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:s}),e.jsx(V.div,{"data-radix-scroll-area-viewport":"",...l,ref:u,style:{overflowX:i.scrollbarXEnabled?"scroll":"hidden",overflowY:i.scrollbarYEnabled?"scroll":"hidden",...t.style},children:e.jsx("div",{ref:i.onContentChange,style:{minWidth:"100%",display:"table"},children:o})})]})});ge.displayName=pe;var A="ScrollAreaScrollbar",be=a.forwardRef((t,r)=>{const{forceMount:n,...o}=t,s=P(A,t.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:i}=s,d=t.orientation==="horizontal";return a.useEffect(()=>(d?l(!0):i(!0),()=>{d?l(!1):i(!1)}),[d,l,i]),s.type==="hover"?e.jsx(ot,{...o,ref:r,forceMount:n}):s.type==="scroll"?e.jsx(at,{...o,ref:r,forceMount:n}):s.type==="auto"?e.jsx(ve,{...o,ref:r,forceMount:n}):s.type==="always"?e.jsx(se,{...o,ref:r}):null});be.displayName=A;var ot=a.forwardRef((t,r)=>{const{forceMount:n,...o}=t,s=P(A,t.__scopeScrollArea),[l,i]=a.useState(!1);return a.useEffect(()=>{const d=s.scrollArea;let u=0;if(d){const m=()=>{window.clearTimeout(u),i(!0)},h=()=>{u=window.setTimeout(()=>i(!1),s.scrollHideDelay)};return d.addEventListener("pointerenter",m),d.addEventListener("pointerleave",h),()=>{window.clearTimeout(u),d.removeEventListener("pointerenter",m),d.removeEventListener("pointerleave",h)}}},[s.scrollArea,s.scrollHideDelay]),e.jsx(Q,{present:n||l,children:e.jsx(ve,{"data-state":l?"visible":"hidden",...o,ref:r})})}),at=a.forwardRef((t,r)=>{const{forceMount:n,...o}=t,s=P(A,t.__scopeScrollArea),l=t.orientation==="horizontal",i=ee(()=>u("SCROLL_END"),100),[d,u]=st("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return a.useEffect(()=>{if(d==="idle"){const m=window.setTimeout(()=>u("HIDE"),s.scrollHideDelay);return()=>window.clearTimeout(m)}},[d,s.scrollHideDelay,u]),a.useEffect(()=>{const m=s.viewport,h=l?"scrollLeft":"scrollTop";if(m){let p=m[h];const x=()=>{const g=m[h];p!==g&&(u("SCROLL"),i()),p=g};return m.addEventListener("scroll",x),()=>m.removeEventListener("scroll",x)}},[s.viewport,l,u,i]),e.jsx(Q,{present:n||d!=="hidden",children:e.jsx(se,{"data-state":d==="hidden"?"hidden":"visible",...o,ref:r,onPointerEnter:$(t.onPointerEnter,()=>u("POINTER_ENTER")),onPointerLeave:$(t.onPointerLeave,()=>u("POINTER_LEAVE"))})})}),ve=a.forwardRef((t,r)=>{const n=P(A,t.__scopeScrollArea),{forceMount:o,...s}=t,[l,i]=a.useState(!1),d=t.orientation==="horizontal",u=ee(()=>{if(n.viewport){const m=n.viewport.offsetWidth<n.viewport.scrollWidth,h=n.viewport.offsetHeight<n.viewport.scrollHeight;i(d?m:h)}},10);return B(n.viewport,u),B(n.content,u),e.jsx(Q,{present:o||l,children:e.jsx(se,{"data-state":l?"visible":"hidden",...s,ref:r})})}),se=a.forwardRef((t,r)=>{const{orientation:n="vertical",...o}=t,s=P(A,t.__scopeScrollArea),l=a.useRef(null),i=a.useRef(0),[d,u]=a.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),m=Ce(d.viewport,d.content),h={...o,sizes:d,onSizesChange:u,hasThumb:m>0&&m<1,onThumbChange:x=>l.current=x,onThumbPointerUp:()=>i.current=0,onThumbPointerDown:x=>i.current=x};function p(x,g){return ht(x,i.current,d,g)}return n==="horizontal"?e.jsx(lt,{...h,ref:r,onThumbPositionChange:()=>{if(s.viewport&&l.current){const x=s.viewport.scrollLeft,g=he(x,d,s.dir);l.current.style.transform=`translate3d(${g}px, 0, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollLeft=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollLeft=p(x,s.dir))}}):n==="vertical"?e.jsx(ct,{...h,ref:r,onThumbPositionChange:()=>{if(s.viewport&&l.current){const x=s.viewport.scrollTop,g=he(x,d);l.current.style.transform=`translate3d(0, ${g}px, 0)`}},onWheelScroll:x=>{s.viewport&&(s.viewport.scrollTop=x)},onDragScroll:x=>{s.viewport&&(s.viewport.scrollTop=p(x))}}):null}),lt=a.forwardRef((t,r)=>{const{sizes:n,onSizesChange:o,...s}=t,l=P(A,t.__scopeScrollArea),[i,d]=a.useState(),u=a.useRef(null),m=Y(r,u,l.onScrollbarXChange);return a.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),e.jsx(we,{"data-orientation":"horizontal",...s,ref:m,sizes:n,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":J(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.x),onDragScroll:h=>t.onDragScroll(h.x),onWheelScroll:(h,p)=>{if(l.viewport){const x=l.viewport.scrollLeft+h.deltaX;t.onWheelScroll(x),Pe(x,p)&&h.preventDefault()}},onResize:()=>{u.current&&l.viewport&&i&&o({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:u.current.clientWidth,paddingStart:K(i.paddingLeft),paddingEnd:K(i.paddingRight)}})}})}),ct=a.forwardRef((t,r)=>{const{sizes:n,onSizesChange:o,...s}=t,l=P(A,t.__scopeScrollArea),[i,d]=a.useState(),u=a.useRef(null),m=Y(r,u,l.onScrollbarYChange);return a.useEffect(()=>{u.current&&d(getComputedStyle(u.current))},[u]),e.jsx(we,{"data-orientation":"vertical",...s,ref:m,sizes:n,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":J(n)+"px",...t.style},onThumbPointerDown:h=>t.onThumbPointerDown(h.y),onDragScroll:h=>t.onDragScroll(h.y),onWheelScroll:(h,p)=>{if(l.viewport){const x=l.viewport.scrollTop+h.deltaY;t.onWheelScroll(x),Pe(x,p)&&h.preventDefault()}},onResize:()=>{u.current&&l.viewport&&i&&o({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:u.current.clientHeight,paddingStart:K(i.paddingTop),paddingEnd:K(i.paddingBottom)}})}})}),[it,ye]=xe(A),we=a.forwardRef((t,r)=>{const{__scopeScrollArea:n,sizes:o,hasThumb:s,onThumbChange:l,onThumbPointerUp:i,onThumbPointerDown:d,onThumbPositionChange:u,onDragScroll:m,onWheelScroll:h,onResize:p,...x}=t,g=P(A,n),[j,_]=a.useState(null),b=Y(r,w=>_(w)),R=a.useRef(null),D=a.useRef(""),H=g.viewport,y=o.content-o.viewport,E=W(h),N=W(u),F=ee(p,10);function T(w){if(R.current){const C=w.clientX-R.current.left,k=w.clientY-R.current.top;m({x:C,y:k})}}return a.useEffect(()=>{const w=C=>{const k=C.target;(j==null?void 0:j.contains(k))&&E(C,y)};return document.addEventListener("wheel",w,{passive:!1}),()=>document.removeEventListener("wheel",w,{passive:!1})},[H,j,y,E]),a.useEffect(N,[o,N]),B(j,F),B(g.content,F),e.jsx(it,{scope:n,scrollbar:j,hasThumb:s,onThumbChange:W(l),onThumbPointerUp:W(i),onThumbPositionChange:N,onThumbPointerDown:W(d),children:e.jsx(V.div,{...x,ref:b,style:{position:"absolute",...x.style},onPointerDown:$(t.onPointerDown,w=>{w.button===0&&(w.target.setPointerCapture(w.pointerId),R.current=j.getBoundingClientRect(),D.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",g.viewport&&(g.viewport.style.scrollBehavior="auto"),T(w))}),onPointerMove:$(t.onPointerMove,T),onPointerUp:$(t.onPointerUp,w=>{const C=w.target;C.hasPointerCapture(w.pointerId)&&C.releasePointerCapture(w.pointerId),document.body.style.webkitUserSelect=D.current,g.viewport&&(g.viewport.style.scrollBehavior=""),R.current=null})})})}),Z="ScrollAreaThumb",je=a.forwardRef((t,r)=>{const{forceMount:n,...o}=t,s=ye(Z,t.__scopeScrollArea);return e.jsx(Q,{present:n||s.hasThumb,children:e.jsx(dt,{ref:r,...o})})}),dt=a.forwardRef((t,r)=>{const{__scopeScrollArea:n,style:o,...s}=t,l=P(Z,n),i=ye(Z,n),{onThumbPositionChange:d}=i,u=Y(r,p=>i.onThumbChange(p)),m=a.useRef(void 0),h=ee(()=>{m.current&&(m.current(),m.current=void 0)},100);return a.useEffect(()=>{const p=l.viewport;if(p){const x=()=>{if(h(),!m.current){const g=mt(p,d);m.current=g,d()}};return d(),p.addEventListener("scroll",x),()=>p.removeEventListener("scroll",x)}},[l.viewport,h,d]),e.jsx(V.div,{"data-state":i.hasThumb?"visible":"hidden",...s,ref:u,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...o},onPointerDownCapture:$(t.onPointerDownCapture,p=>{const g=p.target.getBoundingClientRect(),j=p.clientX-g.left,_=p.clientY-g.top;i.onThumbPointerDown({x:j,y:_})}),onPointerUp:$(t.onPointerUp,i.onThumbPointerUp)})});je.displayName=Z;var ne="ScrollAreaCorner",Se=a.forwardRef((t,r)=>{const n=P(ne,t.__scopeScrollArea),o=!!(n.scrollbarX&&n.scrollbarY);return n.type!=="scroll"&&o?e.jsx(ut,{...t,ref:r}):null});Se.displayName=ne;var ut=a.forwardRef((t,r)=>{const{__scopeScrollArea:n,...o}=t,s=P(ne,n),[l,i]=a.useState(0),[d,u]=a.useState(0),m=!!(l&&d);return B(s.scrollbarX,()=>{var p;const h=((p=s.scrollbarX)==null?void 0:p.offsetHeight)||0;s.onCornerHeightChange(h),u(h)}),B(s.scrollbarY,()=>{var p;const h=((p=s.scrollbarY)==null?void 0:p.offsetWidth)||0;s.onCornerWidthChange(h),i(h)}),m?e.jsx(V.div,{...o,ref:r,style:{width:l,height:d,position:"absolute",right:s.dir==="ltr"?0:void 0,left:s.dir==="rtl"?0:void 0,bottom:0,...t.style}}):null});function K(t){return t?parseInt(t,10):0}function Ce(t,r){const n=t/r;return isNaN(n)?0:n}function J(t){const r=Ce(t.viewport,t.content),n=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,o=(t.scrollbar.size-n)*r;return Math.max(o,18)}function ht(t,r,n,o="ltr"){const s=J(n),l=s/2,i=r||l,d=s-i,u=n.scrollbar.paddingStart+i,m=n.scrollbar.size-n.scrollbar.paddingEnd-d,h=n.content-n.viewport,p=o==="ltr"?[0,h]:[h*-1,0];return Ne([u,m],p)(t)}function he(t,r,n="ltr"){const o=J(r),s=r.scrollbar.paddingStart+r.scrollbar.paddingEnd,l=r.scrollbar.size-s,i=r.content-r.viewport,d=l-o,u=n==="ltr"?[0,i]:[i*-1,0],m=Le(t,u);return Ne([0,i],[0,d])(m)}function Ne(t,r){return n=>{if(t[0]===t[1]||r[0]===r[1])return r[0];const o=(r[1]-r[0])/(t[1]-t[0]);return r[0]+o*(n-t[0])}}function Pe(t,r){return t>0&&t<r}var mt=(t,r=()=>{})=>{let n={left:t.scrollLeft,top:t.scrollTop},o=0;return function s(){const l={left:t.scrollLeft,top:t.scrollTop},i=n.left!==l.left,d=n.top!==l.top;(i||d)&&r(),n=l,o=window.requestAnimationFrame(s)}(),()=>window.cancelAnimationFrame(o)};function ee(t,r){const n=W(t),o=a.useRef(0);return a.useEffect(()=>()=>window.clearTimeout(o.current),[]),a.useCallback(()=>{window.clearTimeout(o.current),o.current=window.setTimeout(n,r)},[n,r])}function B(t,r){const n=W(r);ke(()=>{let o=0;if(t){const s=new ResizeObserver(()=>{cancelAnimationFrame(o),o=window.requestAnimationFrame(n)});return s.observe(t),()=>{window.cancelAnimationFrame(o),s.unobserve(t)}}},[t,n])}var xt=fe,ft=ge,pt=Se;function gt({className:t,children:r,...n}){return e.jsxs(xt,{"data-slot":"scroll-area",className:me("relative",t),...n,children:[e.jsx(ft,{"data-slot":"scroll-area-viewport",className:"focus-visible:ring-ring/50 size-full rounded-[inherit] transition-[color,box-shadow] outline-none focus-visible:ring-[3px] focus-visible:outline-1",children:r}),e.jsx(bt,{}),e.jsx(pt,{})]})}function bt({className:t,orientation:r="vertical",...n}){return e.jsx(be,{"data-slot":"scroll-area-scrollbar",orientation:r,className:me("flex touch-none p-px transition-colors select-none",r==="vertical"&&"h-full w-2.5 border-l border-l-transparent",r==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent",t),...n,children:e.jsx(je,{"data-slot":"scroll-area-thumb",className:"bg-border relative flex-1 rounded-full"})})}async function vt(t){if(navigator.clipboard&&window.isSecureContext)try{return await navigator.clipboard.writeText(t),{success:!0}}catch{}try{const r=document.createElement("textarea");r.value=t,r.style.position="fixed",r.style.top="-9999px",r.style.left="-9999px",r.style.width="1px",r.style.height="1px",r.style.opacity="0",r.style.border="none",r.style.outline="none",r.style.boxShadow="none",r.style.background="transparent",r.style.pointerEvents="none",r.style.zIndex="-1000",r.setAttribute("readonly","readonly"),r.setAttribute("contenteditable","true"),r.setAttribute("tabindex","-1"),r.setAttribute("aria-hidden","true"),document.body.appendChild(r);try{r.focus({preventScroll:!0}),r.select(),r.setSelectionRange(0,t.length);let n=!1;if(n=document.execCommand("copy"),n||(r.select(),r.setSelectionRange(0,99999),n=document.execCommand("copy")),n)return{success:!0}}finally{try{document.body.removeChild(r)}catch{}}}catch{}try{const r=window.getSelection();if(r&&r.rangeCount!==void 0){const n=document.createRange(),o=document.createElement("span");o.textContent=t,o.style.position="fixed",o.style.top="-9999px",o.style.left="-9999px",o.style.width="1px",o.style.height="1px",o.style.opacity="0",o.style.overflow="hidden",o.style.whiteSpace="pre",o.style.userSelect="text",o.style.pointerEvents="none",o.setAttribute("aria-hidden","true"),document.body.appendChild(o);try{n.selectNodeContents(o),r.removeAllRanges(),r.addRange(n);let s=document.execCommand("copy");if(!s&&document.queryCommandSupported("copy")&&(s=document.execCommand("copy")),s)return{success:!0}}finally{try{document.body.removeChild(o),r.removeAllRanges()}catch{}}}}catch{}try{const r=document.createElement("input");r.type="text",r.value=t,r.style.position="fixed",r.style.top="-9999px",r.style.left="-9999px",r.style.opacity="0",r.style.pointerEvents="none",r.setAttribute("readonly","readonly"),r.setAttribute("tabindex","-1"),r.setAttribute("aria-hidden","true"),document.body.appendChild(r);try{if(r.focus({preventScroll:!0}),r.select(),r.setSelectionRange(0,t.length),document.execCommand("copy"))return{success:!0}}finally{try{document.body.removeChild(r)}catch{}}}catch{}return{success:!1,error:"All clipboard methods failed. Your browser may not support clipboard operations or may require user interaction."}}async function yt(t,r,n="Copied to clipboard!",o){return!t||typeof t!="string"?(r.error("Nothing to copy"),!1):(await vt(t)).success?(r.success(n),o&&(o(!0),setTimeout(()=>o(!1),3e3)),!0):(r.error("Unable to copy automatically. Please manually select and copy the text."),!1)}function St({note:t,onBack:r,onEdit:n,onToggleFavorite:o}){var te,oe;const[s,l]=a.useState(null),[i,d]=a.useState(0),[u,m]=a.useState(100),[h,p]=a.useState(0),[x,g]=a.useState(!1),[j,_]=a.useState(!1),[b,R]=a.useState(t.files||[]),[D,H]=a.useState(!1);a.useEffect(()=>{(async()=>{if(t.id&&t.id!=="new"){H(!0);try{const v=await fetch(`https://${qe}.supabase.co/functions/v1/make-server-917daa5d/files/${t.id}`,{headers:{Authorization:`Bearer ${Ge}`}});if(v.ok){const f=await v.json();R(f.files||[])}}catch(v){console.error("Error loading files:",v)}finally{H(!1)}}})()},[t.id]);const y=(b==null?void 0:b.filter(c=>c.type.startsWith("image/")))||[],E=(b==null?void 0:b.filter(c=>!c.type.startsWith("image/")))||[],N=c=>{if(c===0)return"0 Bytes";const v=1024,f=["Bytes","KB","MB","GB"],U=Math.floor(Math.log(c)/Math.log(v));return parseFloat((c/Math.pow(v,U)).toFixed(2))+" "+f[U]},F=c=>c.startsWith("image/")?e.jsx(Ze,{className:"w-5 h-5"}):c==="application/pdf"?e.jsx(de,{className:"w-5 h-5 text-red-500"}):c.includes("word")||c.includes("document")?e.jsx(de,{className:"w-5 h-5 text-blue-500"}):c==="text/plain"?e.jsx(ue,{className:"w-5 h-5 text-gray-500"}):e.jsx(ue,{className:"w-5 h-5"}),T=c=>{const v=document.createElement("a");v.href=c.url,v.download=c.name,v.click(),z.success(`Downloaded ${c.name}`)},w=()=>{y.length>1&&d(c=>(c+1)%y.length)},C=()=>{y.length>1&&d(c=>(c-1+y.length)%y.length)},k=()=>{m(100),p(0)};return a.useEffect(()=>{const c=v=>{if(s&&s.type.startsWith("image/"))switch(v.key){case"ArrowLeft":C();break;case"ArrowRight":w();break;case"Escape":l(null),g(!1);break;case"+":case"=":m(f=>Math.min(f+10,200));break;case"-":m(f=>Math.max(f-10,25));break;case"r":p(f=>(f+90)%360);break}};return window.addEventListener("keydown",c),()=>window.removeEventListener("keydown",c)},[s,y.length]),e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsxs("div",{className:"max-w-5xl mx-auto",children:[e.jsx("div",{className:"bg-card border-b border-border px-6 py-4",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(S,{variant:"ghost",onClick:r,className:"text-muted-foreground hover:text-card-foreground -ml-2",children:[e.jsx(ze,{className:"w-4 h-4 mr-2"}),"Back to Notes"]}),e.jsx(_e,{orientation:"vertical",className:"h-6"}),e.jsx(ce,{variant:"secondary",className:"text-xs font-medium bg-primary/10 text-primary px-3 py-1",children:t.course})]})})}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-university-primary mb-4",children:t.title}),e.jsxs("div",{className:"flex flex-wrap items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsxs("span",{children:["Created ",new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ie,{className:"w-4 h-4"}),e.jsxs("span",{children:["Modified ",new Date(t.lastModified).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ke,{className:"w-4 h-4"}),e.jsx(ce,{variant:"outline",className:"text-xs",children:t.tags})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(I,{children:[e.jsx(O,{children:e.jsx("h2",{className:"text-xl font-semibold text-card-foreground",children:"Note Content"})}),e.jsx(M,{children:e.jsx(gt,{className:"max-h-96",children:e.jsx("div",{className:"prose prose-gray max-w-none",children:e.jsx("p",{className:"whitespace-pre-wrap text-university-secondary leading-relaxed text-base text-[13px]",children:t.content})})})})]}),D&&e.jsx(I,{children:e.jsx(M,{className:"p-6",children:e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary mx-auto mb-2"}),e.jsx("p",{className:"text-sm",children:"Loading attachments..."})]})})}),!D&&y.length>0&&e.jsxs(I,{children:[e.jsx(O,{children:e.jsxs("h2",{className:"text-xl font-semibold text-card-foreground",children:["Images (",y.length,")"]})}),e.jsx(M,{children:e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:y.map((c,v)=>e.jsxs("div",{className:"relative group cursor-pointer rounded-lg overflow-hidden bg-muted aspect-square",onClick:()=>{l(c),d(v),k()},children:[e.jsx("img",{src:c.url,alt:c.name,className:"w-full h-full object-cover transition-transform group-hover:scale-105"}),e.jsx("div",{className:"absolute bottom-2 left-2 right-2",children:e.jsx("p",{className:"text-primary-foreground text-xs bg-black/70 dark:bg-black/80 rounded px-2 py-1 truncate",children:c.name})})]},c.id))})})]}),!D&&E.length>0&&e.jsxs(I,{children:[e.jsx(O,{children:e.jsxs("h2",{className:"text-xl font-semibold text-card-foreground",children:["Documents (",E.length,")"]})}),e.jsx(M,{children:e.jsx("div",{className:"space-y-3",children:E.map(c=>e.jsxs("div",{className:"flex items-center justify-between p-4 border border-border rounded-lg hover:bg-accent transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[F(c.type),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"font-medium text-card-foreground truncate",children:c.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[N(c.size)," • ",new Date(c.uploadDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>l(c),className:"text-xs",children:[e.jsx(Fe,{className:"w-3 h-3 mr-1"}),"Preview"]}),e.jsxs(S,{variant:"outline",size:"sm",onClick:()=>T(c),className:"text-xs",children:[e.jsx(G,{className:"w-3 h-3 mr-1"}),"Download"]})]})]},c.id))})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(I,{children:[e.jsx(O,{children:e.jsx("h3",{className:"font-semibold text-card-foreground",children:"Quick Actions"})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs(S,{variant:"outline",className:"w-full justify-start text-sm hover:bg-accent hover:text-accent-foreground transition-colors",onClick:()=>{n?(n(t),z.success("Opening note editor...")):z.error("Edit functionality not available")},disabled:!n,children:[e.jsx(Ie,{className:"w-4 h-4 mr-2"}),"Edit Note"]}),e.jsxs(S,{variant:"outline",className:"w-full justify-start text-sm hover:bg-accent hover:text-accent-foreground transition-colors",onClick:async()=>{try{const c=z.loading("Generating PDF..."),{default:v}=await Me(async()=>{const{default:L}=await import("./jspdf.es.min-B-M1bMYu.js").then(q=>q.j);return{default:L}},__vite__mapDeps([0,1,2])),f=new v;f.setProperties({title:t.title,subject:`Course: ${t.course}`,author:"BITS Pilani Student Dashboard",creator:"BITS Dashboard"}),f.setFontSize(20),f.setTextColor(25,35,94),f.text(t.title,20,30),f.setFontSize(12),f.setTextColor(100,100,100),f.text(`Course: ${t.course}`,20,45),f.text(`Tags: ${t.tags}`,20,55),f.text(`Created: ${new Date(t.createdAt).toLocaleDateString()}`,20,65),f.text(`Modified: ${new Date(t.lastModified).toLocaleDateString()}`,20,75),f.setDrawColor(200,200,200),f.line(20,85,190,85),f.setFontSize(11),f.setTextColor(60,60,60);const U=f.splitTextToSize(t.content,170);f.text(U,20,100);const Ee=100+U.length*5;if(b&&b.length>0){const L=Ee+20;f.setFontSize(14),f.setTextColor(25,35,94),f.text("Attachments:",20,L),f.setFontSize(10),f.setTextColor(80,80,80),b.forEach((q,Ae)=>{const Re=L+15+Ae*15;f.text(`• ${q.name} (${N(q.size)})`,25,Re)})}const ae=f.getNumberOfPages();for(let L=1;L<=ae;L++)f.setPage(L),f.setFontSize(8),f.setTextColor(150,150,150),f.text("Generated by BITS Pilani Student Dashboard",20,285),f.text(`Page ${L} of ${ae}`,170,285);const le=`${t.title.replace(/[^a-z0-9]/gi,"_").toLowerCase()}.pdf`;f.save(le),z.dismiss(c),z.success(`PDF "${le}" downloaded successfully!`)}catch(c){console.error("PDF generation error:",c),z.error("Failed to generate PDF. Please try again.")}},children:[e.jsx(et,{className:"w-4 h-4 mr-2"}),"Export as PDF"]}),e.jsxs(S,{variant:"outline",className:`w-full justify-start text-sm transition-colors ${j?"bg-green-50 dark:bg-green-900/20 text-green-700 dark:text-green-400 border-green-200 dark:border-green-800":"hover:bg-accent hover:text-accent-foreground"}`,onClick:async()=>{try{const c=`${t.title}

Course: ${t.course}
Tags: ${t.tags}
Created: ${new Date(t.createdAt).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}
Modified: ${new Date(t.lastModified).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})}

─────────────────────────────────────

${t.content}

${b&&b.length>0?`
─────────────────────────────────────

Attachments (${b.length}):
${b.map(v=>`• ${v.name} (${N(v.size)})`).join(`
`)}
`:""}

─────────────────────────────────────
Generated by BITS Pilani Student Dashboard`;await yt(c,z,"Complete note content copied to clipboard!",_)}catch{}},disabled:j,children:[j?e.jsx(We,{className:"w-4 h-4 mr-2"}):e.jsx(Qe,{className:"w-4 h-4 mr-2"}),j?"Copied!":"Copy Content"]})]})]}),e.jsxs(I,{children:[e.jsx(O,{children:e.jsx("h3",{className:"font-semibold text-card-foreground",children:"Note Details"})}),e.jsxs(M,{className:"space-y-3",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Words"}),e.jsx("span",{className:"font-medium text-card-foreground",children:t.content.split(/\s+/).length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Characters"}),e.jsx("span",{className:"font-medium text-card-foreground",children:t.content.length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Attachments"}),e.jsx("span",{className:"font-medium text-card-foreground",children:(b==null?void 0:b.length)||0})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Course"}),e.jsx("span",{className:"font-medium text-card-foreground text-right",children:t.course})]})]})]}),!D&&b&&b.length>0&&e.jsxs(I,{children:[e.jsx(O,{children:e.jsx("h3",{className:"font-semibold text-card-foreground",children:"Attachments Summary"})}),e.jsxs(M,{className:"space-y-2",children:[y.length>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Images"}),e.jsx("span",{className:"font-medium text-card-foreground",children:y.length})]}),E.length>0&&e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Documents"}),e.jsx("span",{className:"font-medium text-card-foreground",children:E.length})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Total Size"}),e.jsx("span",{className:"font-medium text-card-foreground",children:N(b.reduce((c,v)=>c+v.size,0))})]})]})]})]})]})]})]}),s&&e.jsx($e,{open:!!s,onOpenChange:()=>{l(null),g(!1),k()},children:e.jsxs(He,{className:`${x?"max-w-[95vw] max-h-[95vh] w-full h-full":"sm:max-w-4xl max-h-[90vh]"}`,children:[e.jsxs(Oe,{children:[e.jsxs(Be,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F(s.type),e.jsx("span",{children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[s.type.startsWith("image/")&&e.jsxs(e.Fragment,{children:[y.length>1&&e.jsx("div",{className:"flex items-center gap-1 text-sm text-gray-600",children:e.jsxs("span",{children:[i+1," of ",y.length]})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>m(c=>Math.max(c-10,25)),children:e.jsx(rt,{className:"w-3 h-3"})}),e.jsxs("span",{className:"text-sm text-gray-600",children:[u,"%"]}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>m(c=>Math.min(c+10,200)),children:e.jsx(tt,{className:"w-3 h-3"})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>p(c=>(c+90)%360),children:e.jsx(Ye,{className:"w-3 h-3"})}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>g(!x),children:e.jsx(Je,{className:"w-3 h-3"})})]}),e.jsx(S,{variant:"outline",size:"sm",onClick:()=>T(s),children:e.jsx(G,{className:"w-3 h-3"})})]})]}),e.jsxs(Ue,{className:"sr-only",children:["File preview for ",s.name," - ",N(s.size)]})]}),e.jsx("div",{className:"flex-1 overflow-auto relative",children:s.type.startsWith("image/")?e.jsxs("div",{className:"relative flex items-center justify-center min-h-96",children:[y.length>1&&e.jsxs(e.Fragment,{children:[e.jsx(S,{variant:"outline",size:"sm",className:"absolute left-4 top-1/2 transform -translate-y-1/2 z-10 bg-white/80 hover:bg-white",onClick:C,children:e.jsx(Xe,{className:"w-4 h-4"})}),e.jsx(S,{variant:"outline",size:"sm",className:"absolute right-4 top-1/2 transform -translate-y-1/2 z-10 bg-white/80 hover:bg-white",onClick:w,children:e.jsx(Ve,{className:"w-4 h-4"})})]}),e.jsx("img",{src:((te=y[i])==null?void 0:te.url)||s.url,alt:((oe=y[i])==null?void 0:oe.name)||s.name,className:"max-w-full max-h-full object-contain transition-transform",style:{transform:`scale(${Math.min(u/100,1.5)}) rotate(${h}deg)`,transformOrigin:"center",maxWidth:"90%",maxHeight:"90%",width:"auto",height:"auto",margin:"auto",display:"block"}})]}):s.type==="application/pdf"?e.jsx("iframe",{src:s.url,className:"w-full h-96 min-h-96 rounded-lg",title:s.name}):e.jsxs("div",{className:"text-center py-8",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"Preview not available for this file type"}),e.jsxs(S,{onClick:()=>T(s),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Download File"]})]})}),e.jsxs("div",{className:"flex items-center justify-between pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:[N(s.size)," • ",new Date(s.uploadDate).toLocaleDateString()]}),e.jsx("div",{className:"flex gap-2",children:e.jsxs(S,{variant:"outline",onClick:()=>T(s),children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),"Download"]})})]})]})})]})}export{St as default};
//# sourceMappingURL=NoteDetailPage-D8y10ntw.js.map
