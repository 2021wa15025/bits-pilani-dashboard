{"version":3,"file":"CourseDetailsPage-pizaKREx.js","sources":["../../components/CourseDetailsPage.tsx"],"sourcesContent":["import { useState, useEffect } from \"react\";\nimport { ArrowLeft, Download, Upload, Calendar, Clock, Users, Star, BookOpen, FileText, Video, RefreshCw } from \"lucide-react\";\nimport { projectId, publicAnonKey } from '../utils/supabase/info';\nimport { Card, CardContent, CardHeader, CardTitle } from \"./ui/card\";\nimport { Button } from \"./ui/button\";\nimport { Badge } from \"./ui/badge\";\nimport { Progress } from \"./ui/progress\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"./ui/tabs\";\nimport { Input } from \"./ui/input\";\nimport { Textarea } from \"./ui/textarea\";\nimport { toast } from \"sonner\";\nimport { Toaster } from \"./ui/sonner\";\n\ninterface Course {\n  id: string;\n  title: string;\n  code: string;\n  semester: number;\n  status: \"ongoing\" | \"completed\" | \"upcoming\";\n  progress?: number;\n  grades: {\n    assignmentQuiz: number | null;\n    midSemester: number | null;\n    comprehensive: number | null;\n    total: number | null;\n    finalGrade: string | null;\n  };\n}\n\ninterface CourseDetailsPageProps {\n  course: Course;\n  onBack: () => void;\n}\n\nfunction CourseDetailsPage({ course, onBack }: CourseDetailsPageProps) {\n  const [activeTab, setActiveTab] = useState(\"overview\");\n  const [uploadFile, setUploadFile] = useState<File | null>(null);\n  \n  // Fetch materials from backend\n  const [questionPapers, setQuestionPapers] = useState<any[]>([]);\n  const [sessions, setSessions] = useState<any[]>([]);\n  const [quizzes, setQuizzes] = useState<any[]>([]);\n  const [loadingMaterials, setLoadingMaterials] = useState(false);\n  const [lastRefreshTime, setLastRefreshTime] = useState(Date.now());\n  const [syllabusData, setSyllabusData] = useState<any>(null);\n  const [notesData, setNotesData] = useState<any>(null);\n  const [contentRefreshKey, setContentRefreshKey] = useState(0);\n  const [localQuizzes, setLocalQuizzes] = useState<any[]>([]);\n\n  // Load syllabus and notes from localStorage first, then try backend\n  const loadSyllabusAndNotes = async () => {\n    try {\n      // First, load from localStorage for immediate display\n      const storedSyllabus = localStorage.getItem(`syllabus_${course.id}`);\n      const storedNotes = localStorage.getItem(`notes_${course.id}`);\n      \n      if (storedSyllabus) {\n        const syllabusData = JSON.parse(storedSyllabus);\n        setSyllabusData(syllabusData.length > 0 ? syllabusData : null);\n      }\n      \n      if (storedNotes) {\n        const notesData = JSON.parse(storedNotes);\n        setNotesData(notesData.length > 0 ? notesData : null);\n      }\n      \n      // If no localStorage data, show empty state\n      if (!storedSyllabus && !storedNotes) {\n        setSyllabusData(null);\n        setNotesData(null);\n      }\n      \n      // Then try to sync with backend in background (optional)\n      try {\n        const response = await fetch(\n          `https://${projectId}.supabase.co/functions/v1/make-server-917daa5d/course-materials/${course.id}`,\n          {\n            headers: {\n              'Authorization': `Bearer ${publicAnonKey}`\n            }\n          }\n        );\n\n        if (response.ok) {\n          const data = await response.json();\n          \n          // Filter syllabus and notes from materials\n          const syllabusItems = data.materials ? data.materials.filter((m: any) => m.type === 'syllabus') : [];\n          const noteItems = data.materials ? data.materials.filter((m: any) => m.type === 'note') : [];\n          \n          // Update with backend data if available and different from localStorage\n          if (syllabusItems.length > 0) {\n            setSyllabusData(syllabusItems);\n            localStorage.setItem(`syllabus_${course.id}`, JSON.stringify(syllabusItems));\n          }\n          if (noteItems.length > 0) {\n            setNotesData(noteItems);\n            localStorage.setItem(`notes_${course.id}`, JSON.stringify(noteItems));\n          }\n        }\n      } catch (backendError) {\n        console.log('Backend sync failed, using localStorage data:', backendError.message);\n      }\n      \n    } catch (error) {\n      console.error('Error loading syllabus/notes:', error);\n      setSyllabusData(null);\n      setNotesData(null);\n    }\n  };\n\n  // Manual refresh function\n  const refreshContent = () => {\n    loadSyllabusAndNotes();\n    setContentRefreshKey(prev => prev + 1);\n    toast.success(\"Content refreshed successfully!\");\n  };\n\n  // Fetch materials from backend\n\n  // Load syllabus and notes when component mounts\n  useEffect(() => {\n    loadSyllabusAndNotes();\n  }, [course.id, contentRefreshKey]);\n\n    // Set up real-time sync with backend API polling\n  useEffect(() => {\n    // Initial load\n    loadSyllabusAndNotes();\n    \n    // Poll for updates every 5 seconds\n    const pollInterval = setInterval(() => {\n      loadSyllabusAndNotes();\n    }, 5000);\n\n    // Keep custom event listener for same-tab updates (if admin is in same browser)\n    const handleCustomStorageEvent = (e: CustomEvent) => {\n      console.log('Custom storage event received:', e.detail);\n      if (e.detail.key === `syllabus_${course.id}` || e.detail.key === `notes_${course.id}`) {\n        loadSyllabusAndNotes();\n        toast.success(`${e.detail.type === 'syllabus' ? 'Syllabus' : 'Notes'} updated by admin!`);\n      }\n    };\n\n    window.addEventListener('localStorageUpdated', handleCustomStorageEvent as EventListener);\n    \n    return () => {\n      clearInterval(pollInterval);\n      window.removeEventListener('localStorageUpdated', handleCustomStorageEvent as EventListener);\n    };\n  }, [course.id]);\n\n  // Auto-refresh materials every 10 seconds\n  useEffect(() => {\n    const refreshInterval = setInterval(() => {\n      fetchMaterials();\n    }, 10000); // Refresh every 10 seconds\n\n    return () => clearInterval(refreshInterval);\n  }, [course.id]);\n\n  // Fetch all materials when component mounts and set up auto-refresh\n  useEffect(() => {\n    // Initial fetch\n    fetchMaterials();\n    fetchQuizzes();\n\n    // Auto-refresh every 10 seconds to sync with admin uploads\n    const refreshInterval = setInterval(() => {\n      console.log('ðŸ”„ Auto-refreshing materials and quizzes...');\n      fetchMaterials();\n      fetchQuizzes();\n      setLastRefreshTime(Date.now());\n      // Also refresh syllabus and notes\n      loadSyllabusAndNotes();\n    }, 10000); // Refresh every 10 seconds\n\n    return () => clearInterval(refreshInterval);\n  }, [course.id]);\n\n  const fetchMaterials = async () => {\n    setLoadingMaterials(true);\n    try {\n      const response = await fetch(\n        `https://${projectId}.supabase.co/functions/v1/make-server-917daa5d/course-materials/${course.id}`,\n        {\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`\n          }\n        }\n      );\n      \n      if (response.ok) {\n        const data = await response.json();\n        \n        // Separate materials by type\n        const papers = data.materials.filter((m: any) => m.type === 'paper');\n        const ppts = data.materials.filter((m: any) => m.type === 'ppt');\n        \n        setQuestionPapers(papers);\n        \n        // Create session list with uploaded PPTs\n        const sessionList = Array.from({ length: 12 }, (_, i) => {\n          const sessionPPT = ppts.find((p: any) => p.title.includes(`Session ${i + 1}`));\n          return {\n            id: i + 1,\n            title: `Session ${i + 1}`,\n            topic: `Chapter ${i + 1} Topics`,\n            date: `Week ${i + 1}`,\n            pptUploaded: !!sessionPPT,\n            pptUrl: sessionPPT?.fileUrl || null,\n            pptData: sessionPPT || null\n          };\n        });\n        \n        setSessions(sessionList);\n        \n        // Check if materials changed and show toast notification\n        const hasNewPapers = papers.length > questionPapers.length;\n        const hasNewPPTs = ppts.length > sessions.filter(s => s.pptUploaded).length;\n        \n        if ((hasNewPapers || hasNewPPTs) && questionPapers.length > 0) {\n          const newCount = (hasNewPapers ? papers.length - questionPapers.length : 0) + \n                          (hasNewPPTs ? ppts.length - sessions.filter(s => s.pptUploaded).length : 0);\n          console.log(`ðŸ†• New materials detected! ${papers.length} papers, ${ppts.length} PPTs`);\n          toast.success(`${newCount} new material${newCount > 1 ? 's' : ''} uploaded!`, {\n            description: 'New content is now available for download.',\n            duration: 5000\n          });\n        } else {\n          console.log(`âœ… Student: Loaded ${papers.length} papers, ${ppts.length} PPTs`);\n        }\n      } else {\n        console.error('Failed to fetch materials: HTTP', response.status);\n        toast.error('Failed to load materials', {\n          description: 'Please try refreshing the page.',\n          duration: 3000\n        });\n      }\n    } catch (error) {\n      console.error('Error fetching materials:', error);\n      toast.error('Connection error', {\n        description: 'Could not sync with server. Retrying...',\n        duration: 3000\n      });\n    } finally {\n      setLoadingMaterials(false);\n    }\n  };\n\n  const fetchQuizzes = async () => {\n    try {\n      const response = await fetch(\n        `https://${projectId}.supabase.co/functions/v1/make-server-917daa5d/course-quizzes/${course.id}`,\n        {\n          headers: {\n            'Authorization': `Bearer ${publicAnonKey}`\n          }\n        }\n      );\n      \n      if (response.ok) {\n        const data = await response.json();\n        \n        // Transform backend quizzes to display format\n        const transformedQuizzes = data.quizzes.map((q: any) => {\n          const now = new Date();\n          const start = new Date(q.startDate);\n          const end = new Date(q.endDate);\n          \n          let status = \"Not Available\";\n          if (now >= start && now <= end) {\n            status = \"Available\";\n          } else if (now > end) {\n            status = \"Completed\";\n          } else {\n            status = \"Upcoming\";\n          }\n          \n          return {\n            id: q.id,\n            title: q.title,\n            link: q.link, // Google Forms link from admin\n            startDate: new Date(q.startDate).toLocaleDateString('en-US', { day: 'numeric', month: 'long', year: 'numeric' }),\n            endDate: new Date(q.endDate).toLocaleDateString('en-US', { day: 'numeric', month: 'long', year: 'numeric' }),\n            maxMarks: q.maxMarks || 5,\n            status: status,\n            score: null // TODO: fetch from submissions if needed\n          };\n        });\n        \n        // Check for new quizzes and notify\n        const hasNewQuizzes = transformedQuizzes.length > quizzes.length;\n        if (hasNewQuizzes && quizzes.length > 0) {\n          const newCount = transformedQuizzes.length - quizzes.length;\n          console.log(`ðŸ†• ${newCount} new quiz${newCount > 1 ? 'zes' : ''} added!`);\n          toast.info(`${newCount} new quiz${newCount > 1 ? 'zes' : ''} available!`, {\n            description: 'Check the Quizzes tab to take them.',\n            duration: 5000\n          });\n        }\n        \n        setQuizzes(transformedQuizzes);\n        console.log(`âœ… Student: Loaded ${transformedQuizzes.length} quizzes from backend`);\n      } else {\n        console.log('Failed to fetch quizzes from backend');\n        setQuizzes([]);\n      }\n    } catch (error) {\n      console.error('Error fetching quizzes:', error);\n      setQuizzes([]); // Empty on error\n    }\n  };\n\n  const getStatusColor = (status: string) => {\n    switch (status) {\n      case \"completed\": return \"bg-green-500 text-white\";\n      case \"upcoming\": return \"bg-orange-500 text-white\";\n      case \"ongoing\": return \"bg-blue-500 text-white\";\n      default: return \"bg-gray-500 text-white\";\n    }\n  };\n\n  const getGradeColor = (grade: string) => {\n    if (grade === 'A' || grade === 'A-') return 'bg-green-100 text-green-800';\n    if (grade === 'B' || grade === 'B-') return 'bg-blue-100 text-blue-800';\n    if (grade === 'C' || grade === 'C-') return 'bg-yellow-100 text-yellow-800';\n    return 'bg-gray-100 text-gray-800';\n  };\n\n  // ONLY use backend quiz data - NO FALLBACK\n  const getQuizData = () => {\n    return quizzes; // Only return what admin uploaded - NO HARDCODED DATA\n  };\n\n\n\n  const courseAverage = course.status === \"completed\" && course.grades.total \n    ? Math.round((course.grades.total / 100) * 100) \n    : course.progress || 0;\n\n  return (\n    <div className=\"min-h-screen bg-university-light\">\n      {/* Header */}\n      <div className=\"bg-[#191f5e] border-b border-university-border sticky top-0 z-10\">\n        <div className=\"max-w-7xl mx-auto px-6 py-4\">\n          <div className=\"flex flex-col sm:flex-row items-start sm:items-center gap-2 sm:gap-4\">\n            <Button \n              variant=\"ghost\" \n              size=\"sm\" \n              onClick={onBack} \n              className=\"gap-1 sm:gap-2 bg-white/20 text-white hover:bg-white/30 hover:text-white transition-all duration-200 active:scale-95 shrink-0\"\n            >\n              <ArrowLeft className=\"w-3 h-3 sm:w-4 sm:h-4\" />\n              Back to Courses\n            </Button>\n            <div className=\"flex-1 min-w-0 w-full sm:w-auto\">\n              <h1 className=\"text-lg sm:text-xl font-semibold text-white truncate\">{course.title}</h1>\n              <p className=\"text-sm text-white/80 truncate\">{course.code} â€¢ Semester {course.semester}</p>\n            </div>\n            <div className=\"flex items-center gap-2 shrink-0\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                onClick={() => {\n                  fetchMaterials();\n                  fetchQuizzes();\n                  refreshContent();\n                  setLastRefreshTime(Date.now());\n                }}\n                disabled={loadingMaterials}\n                className=\"text-white hover:bg-white/20 gap-1\"\n                title=\"Refresh materials\"\n              >\n                <RefreshCw className={`w-3 h-3 ${loadingMaterials ? 'animate-spin' : ''}`} />\n                <span className=\"hidden sm:inline text-xs\">Sync</span>\n              </Button>\n              <Badge className=\"bg-blue-600 text-white px-2 sm:px-4 py-1 sm:py-2 text-xs shrink-0\">\n                Student View\n              </Badge>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Course Stats */}\n      <div className=\"max-w-7xl mx-auto px-6 py-6\">\n        {/* Tabs */}\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <TabsList className=\"mb-6 bg-[#191f5e] dark:bg-slate-800 rounded-lg md:rounded-xl w-full p-1\">\n            <TabsTrigger value=\"overview\" className=\"text-white data-[state=active]:bg-white data-[state=active]:text-[#191f5e] dark:data-[state=active]:bg-white dark:data-[state=active]:text-[#191f5e] rounded-md md:rounded-xl text-sm md:text-base px-3 md:px-4 py-2 md:py-2.5 flex-1 font-medium\">Overview</TabsTrigger>\n            <TabsTrigger value=\"syllabus\" className=\"text-white data-[state=active]:bg-white data-[state=active]:text-[#191f5e] dark:data-[state=active]:bg-white dark:data-[state=active]:text-[#191f5e] rounded-md md:rounded-xl text-sm md:text-base px-3 md:px-4 py-2 md:py-2.5 flex-1 font-medium\">Syllabus</TabsTrigger>\n            <TabsTrigger value=\"notes\" className=\"text-white data-[state=active]:bg-white data-[state=active]:text-[#191f5e] dark:data-[state=active]:bg-white dark:data-[state=active]:text-[#191f5e] rounded-md md:rounded-xl text-sm md:text-base px-3 md:px-4 py-2 md:py-2.5 flex-1 font-medium\">Notes</TabsTrigger>\n            <TabsTrigger value=\"quizzes\" className=\"text-white data-[state=active]:bg-white data-[state=active]:text-[#191f5e] dark:data-[state=active]:bg-white dark:data-[state=active]:text-[#191f5e] rounded-md md:rounded-xl text-sm md:text-base px-3 md:px-4 py-2 md:py-2.5 flex-1 font-medium\">Quizzes</TabsTrigger>\n            <TabsTrigger value=\"papers\" className=\"text-white data-[state=active]:bg-white data-[state=active]:text-[#191f5e] dark:data-[state=active]:bg-white dark:data-[state=active]:text-[#191f5e] rounded-md md:rounded-xl text-sm md:text-base px-3 md:px-4 py-2 md:py-2.5 flex-1 font-medium\">Papers</TabsTrigger>\n            <TabsTrigger value=\"sessions\" className=\"text-white data-[state=active]:bg-white data-[state=active]:text-[#191f5e] dark:data-[state=active]:bg-white dark:data-[state=active]:text-[#191f5e] rounded-md md:rounded-xl text-sm md:text-base px-3 md:px-4 py-2 md:py-2.5 flex-1 font-medium\">Sessions</TabsTrigger>\n          </TabsList>\n\n          <TabsContent value=\"overview\">\n            <div className=\"space-y-6\">\n              {course.status === \"completed\" && course.grades.finalGrade && (\n                <Card className=\"bg-university-light border-university\">\n                  <CardHeader>\n                    <CardTitle className=\"text-university-primary\">Academic Performance</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"grid grid-cols-2 md:grid-cols-3 gap-6 mb-6\">\n                      <div>\n                        <span className=\"text-university-secondary text-sm\">Assignment/Quiz:</span>\n                        <p className=\"text-university-primary font-semibold text-lg\">{course.grades.assignmentQuiz}/25</p>\n                      </div>\n                      <div>\n                        <span className=\"text-university-secondary text-sm\">Mid Semester:</span>\n                        <p className=\"text-university-primary font-semibold text-lg\">{course.grades.midSemester}/25</p>\n                      </div>\n                      <div>\n                        <span className=\"text-university-secondary text-sm\">Comprehensive:</span>\n                        <p className=\"text-university-primary font-semibold text-lg\">{course.grades.comprehensive}/50</p>\n                      </div>\n                      <div>\n                        <span className=\"text-university-secondary text-sm\">Total Marks:</span>\n                        <p className=\"text-university-primary font-semibold text-lg\">{course.grades.total}/100</p>\n                      </div>\n                      <div>\n                        <span className=\"text-university-secondary text-sm\">Final Grade: </span>\n                        <span className=\"text-university-primary font-semibold text-lg\">\n                          {course.grades.finalGrade}\n                        </span>\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n              {course.status === \"ongoing\" && (\n                <Card className=\"bg-university-light border-university\">\n                  <CardHeader>\n                    <CardTitle className=\"text-university-primary\">Current Progress</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-4\">\n                      <div className=\"flex justify-between items-center\">\n                        <span className=\"text-university-secondary\">Course Progress:</span>\n                        <span className=\"text-university-primary font-semibold\">{course.progress}%</span>\n                      </div>\n                      <Progress value={course.progress || 0} className=\"h-3\" />\n                      <p className=\"text-sm text-university-secondary\">\n                        Grades will be available after completion of assessments.\n                      </p>\n                    </div>\n                  </CardContent>\n                </Card>\n              )}\n\n              {course.status === \"upcoming\" && (\n                <Card className=\"bg-university-light border-university\">\n                  <CardHeader>\n                    <CardTitle className=\"text-university-primary\">Course Information</CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <p className=\"text-university-secondary\">\n                      This course is scheduled for Semester {course.semester}. \n                      Course materials and assessments will be available when the semester begins.\n                    </p>\n                  </CardContent>\n                </Card>\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"quizzes\">\n            <div className=\"space-y-6\">\n              {getQuizData().length === 0 ? (\n                <Card className=\"bg-university-light border-university\">\n                  <CardContent className=\"py-12\">\n                    <div className=\"text-center text-university-secondary\">\n                      <FileText className=\"w-12 h-12 mx-auto mb-3 opacity-30\" />\n                      <p className=\"text-sm\">No quizzes uploaded yet.</p>\n                      <p className=\"text-xs mt-1\">Your instructor will upload quizzes here when available.</p>\n                    </div>\n                  </CardContent>\n                </Card>\n              ) : (\n                getQuizData().map((quiz) => (\n                  <Card key={quiz.id} className=\"bg-university-light border-university\">\n                    <CardHeader>\n                      <div className=\"flex items-center justify-between\">\n                        <CardTitle className=\"text-lg text-university-primary\">{quiz.title}</CardTitle>\n                        <Badge className={\n                          quiz.status === \"Completed\" ? \"bg-green-500 text-white\" :\n                          quiz.status === \"Available\" ? \"bg-university-primary text-white\" :\n                          quiz.status === \"Upcoming\" ? \"bg-orange-500 text-white\" :\n                          \"bg-gray-500 text-white\"\n                        }>\n                          {quiz.status}\n                        </Badge>\n                      </div>\n                    </CardHeader>\n                    <CardContent>\n                      <div className=\"space-y-4\">\n                        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                          <div>\n                            <span className=\"text-university-secondary text-sm\">Start Date:</span>\n                            <p className=\"text-university-primary font-medium\">{quiz.startDate}</p>\n                          </div>\n                          <div>\n                            <span className=\"text-university-secondary text-sm\">End Date:</span>\n                            <p className=\"text-university-primary font-medium\">{quiz.endDate}</p>\n                          </div>\n                          <div>\n                            <span className=\"text-university-secondary text-sm\">Max Marks:</span>\n                            <p className=\"text-university-primary font-medium\">{quiz.maxMarks} marks</p>\n                          </div>\n                        </div>\n                        \n                        {quiz.status === \"Available\" && (\n                          <div className=\"pt-4 border-t border-university-border\">\n                            <Button \n                              className=\"bg-university-primary hover:bg-university-primary/90 text-white gap-2 w-full sm:w-auto\"\n                              onClick={() => {\n                                window.open(quiz.link, \"_blank\");\n                              }}\n                            >\n                              <FileText className=\"w-4 h-4\" />\n                              Take Quiz (Opens in New Tab)\n                            </Button>\n                          </div>\n                        )}\n                        \n                        {quiz.status === \"Upcoming\" && (\n                          <div className=\"pt-4 border-t border-university-border\">\n                            <p className=\"text-sm text-university-secondary\">\n                              This quiz will be available from {quiz.startDate}\n                            </p>\n                          </div>\n                        )}\n                        \n                        {quiz.status === \"Completed\" && (\n                          <div className=\"pt-4 border-t border-university-border\">\n                            <p className=\"text-sm text-university-secondary\">\n                              This quiz has ended. Contact your instructor for any queries.\n                            </p>\n                          </div>\n                        )}\n                      </div>\n                    </CardContent>\n                  </Card>\n                ))\n              )}\n            </div>\n          </TabsContent>\n\n          <TabsContent value=\"syllabus\">\n            <Card className=\"bg-university-light border-university\">\n              <CardHeader>\n                <CardTitle className=\"text-university-primary\">Syllabus</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {!syllabusData ? (\n                    <div className=\"text-center py-12 text-university-secondary\">\n                      <FileText className=\"w-12 h-12 mx-auto mb-3 opacity-30\" />\n                      <p className=\"text-sm\">No syllabus uploaded yet.</p>\n                      <p className=\"text-xs mt-1\">Your instructor will upload the syllabus here when available.</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <h3 className=\"text-lg font-semibold text-university-primary\">Course Syllabus</h3>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={refreshContent}\n                          className=\"gap-2\"\n                        >\n                          <RefreshCw className=\"w-4 h-4\" />\n                          Refresh\n                        </Button>\n                      </div>\n                      <div className=\"prose prose-sm max-w-none\">\n                        <div className=\"bg-white/50 p-6 rounded-lg border border-university-border\">\n                          <div style={{ whiteSpace: 'pre-wrap' }} className=\"text-university-primary leading-relaxed\">\n                            {syllabusData.content}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-sm text-university-secondary\">\n                        <p>Last updated: {syllabusData.updatedAt ? new Date(syllabusData.updatedAt).toLocaleDateString() : 'Recently'}</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"notes\">\n            <Card className=\"bg-university-light border-university\">\n              <CardHeader>\n                <CardTitle className=\"text-university-primary\">Notes</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {!notesData ? (\n                    <div className=\"text-center py-12 text-university-secondary\">\n                      <FileText className=\"w-12 h-12 mx-auto mb-3 opacity-30\" />\n                      <p className=\"text-sm\">No notes uploaded yet.</p>\n                      <p className=\"text-xs mt-1\">Your instructor will upload notes here when available.</p>\n                    </div>\n                  ) : (\n                    <div className=\"space-y-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <h3 className=\"text-lg font-semibold text-university-primary\">Course Notes</h3>\n                        <Button\n                          variant=\"outline\"\n                          size=\"sm\"\n                          onClick={refreshContent}\n                          className=\"gap-2\"\n                        >\n                          <RefreshCw className=\"w-4 h-4\" />\n                          Refresh\n                        </Button>\n                      </div>\n                      <div className=\"prose prose-sm max-w-none\">\n                        <div className=\"bg-white/50 p-6 rounded-lg border border-university-border\">\n                          <div style={{ whiteSpace: 'pre-wrap' }} className=\"text-university-primary leading-relaxed\">\n                            {notesData.content}\n                          </div>\n                        </div>\n                      </div>\n                      <div className=\"text-sm text-university-secondary\">\n                        <p>Last updated: {notesData.updatedAt ? new Date(notesData.updatedAt).toLocaleDateString() : 'Recently'}</p>\n                      </div>\n                    </div>\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"papers\">\n            <Card className=\"bg-university-light border-university\">\n              <CardHeader>\n                <CardTitle className=\"text-university-primary\">Previous Question Papers</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {questionPapers.length === 0 ? (\n                    <div className=\"text-center py-12 text-university-secondary\">\n                      <FileText className=\"w-12 h-12 mx-auto mb-3 opacity-30\" />\n                      <p className=\"text-sm\">No question papers uploaded yet.</p>\n                      <p className=\"text-xs mt-1\">Check back later for updates from your instructor.</p>\n                    </div>\n                  ) : (\n                    questionPapers.map((paper) => (\n                      <div key={paper.id} className=\"flex items-center justify-between p-4 border border-university-border rounded-lg bg-[rgba(255,255,255,0)]\">\n                        <div className=\"flex items-center gap-3\">\n                          <div className=\"bg-university-primary p-2 rounded-lg\">\n                            <FileText className=\"w-5 h-5 text-white\" />\n                          </div>\n                          <div>\n                            <p className=\"font-medium text-university-primary\">{paper.title}</p>\n                            <p className=\"text-sm text-university-secondary\">Year: {paper.year} | Semester: {paper.semester}</p>\n                          </div>\n                        </div>\n                        <Button \n                          variant=\"outline\" \n                          size=\"sm\" \n                          className=\"gap-2 border-university-primary text-university-primary hover:bg-university-primary hover:text-white\"\n                          onClick={() => window.open(paper.fileUrl, '_blank')}\n                        >\n                          <Download className=\"w-4 h-4\" />\n                          Download\n                        </Button>\n                      </div>\n                    ))\n                  )}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n\n          <TabsContent value=\"sessions\">\n            <Card className=\"bg-university-light border-university\">\n              <CardHeader>\n                <CardTitle className=\"text-university-primary\">Session Materials</CardTitle>\n              </CardHeader>\n              <CardContent>\n                <div className=\"space-y-4\">\n                  {sessions.map((session) => (\n                    <div key={session.id} className=\"flex items-center justify-between p-4 border border-university-border rounded-lg bg-[rgba(255,249,249,0)]\">\n                      <div className=\"flex items-center gap-3\">\n                        <div className=\"bg-university-primary p-2 rounded-lg\">\n                          <Video className=\"w-5 h-5 text-white\" />\n                        </div>\n                        <div>\n                          <p className=\"font-medium text-university-primary\">{session.title}: {session.topic}</p>\n                          <p className=\"text-sm text-university-secondary\">{session.date}</p>\n                        </div>\n                      </div>\n                      <div className=\"flex items-center gap-2\">\n                        {session.pptUploaded ? (\n                          <Button \n                            variant=\"outline\" \n                            size=\"sm\" \n                            className=\"gap-2 border-university-primary text-university-primary hover:bg-university-primary hover:text-white\"\n                            onClick={() => window.open(session.pptUrl, '_blank')}\n                          >\n                            <Download className=\"w-4 h-4\" />\n                            Download PPT\n                          </Button>\n                        ) : (\n                          <Badge className=\"bg-gray-100 text-gray-600\">Not Uploaded</Badge>\n                        )}\n                      </div>\n                    </div>\n                  ))}\n                </div>\n              </CardContent>\n            </Card>\n          </TabsContent>\n        </Tabs>\n      </div>\n      <Toaster />\n    </div>\n  );\n}\n\nexport default CourseDetailsPage;"],"names":["CourseDetailsPage","course","onBack","activeTab","setActiveTab","useState","uploadFile","setUploadFile","questionPapers","setQuestionPapers","sessions","setSessions","quizzes","setQuizzes","loadingMaterials","setLoadingMaterials","lastRefreshTime","setLastRefreshTime","syllabusData","setSyllabusData","notesData","setNotesData","contentRefreshKey","setContentRefreshKey","localQuizzes","setLocalQuizzes","loadSyllabusAndNotes","storedSyllabus","storedNotes","response","projectId","publicAnonKey","data","syllabusItems","m","noteItems","backendError","error","refreshContent","prev","toast","useEffect","pollInterval","handleCustomStorageEvent","e","refreshInterval","fetchMaterials","fetchQuizzes","papers","ppts","sessionList","_","i","sessionPPT","p","hasNewPapers","hasNewPPTs","s","newCount","transformedQuizzes","q","now","start","end","status","getQuizData","jsxs","jsx","Button","ArrowLeft","RefreshCw","Badge","Tabs","TabsList","TabsTrigger","TabsContent","Card","CardHeader","CardTitle","CardContent","Progress","FileText","quiz","paper","Download","session","Video","Toaster"],"mappings":"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"}